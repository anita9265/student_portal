(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["557e13"],{"/rgM":function(e,t,n){},"2GLw":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("f3eo"),a=n("PBAA"),o=function(){return a.a?new r.yCookies(".".concat(window.location.hostname)):void 0}},"2YIZ":function(e,t,n){},B0Hq:function(e,t,n){},Bhso:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("PBAA"),a=n("Qa6K"),o=n("G48W"),c="fiji:ls-availability-test",i=!1;if(r.a)try{localStorage.setItem(c,"1"),localStorage.removeItem(c),i=!0}catch(u){var l=Object(o.b)("project");Object(a.a)("/".concat(l,"/no-localstorage"))}var s=i},D1t3:function(e,t,n){},DvqP:function(e,t,n){},EVYq:function(e,t,n){},PH0m:function(e,t,n){},Rk95:function(e,t,n){},Y70h:function(e,t,n){"use strict";n.r(t),n.d(t,"RelevanceCookie",(function(){return Tt}));var r,a,o,c=n("iolB"),i=n("QOMy"),l=n("oUqw"),s=n("ww0C"),u=Object(s.a)("relevanceCookie"),f=n("cDcd"),b=n("Mj+e"),d=n("ghXu"),p=n("zy2/"),j=n("+6NG"),h=n("UWoi"),v=n("4Gwv"),y=n("dEty"),O=(n("2YIZ"),Object(p.withBemMod)(Object(y.c)(),{size:"s"})),m=Object(v.g)({desktop:O}),x=n("UW3g"),g=n("ihlU"),w=n("omwk"),C=n("xEF0"),k=n("TbsR"),D=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c},S=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},R=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];void 0!==e&&e.apply(void 0,S([],D(n),!1)),t.apply(void 0,S([],D(n),!1))}},P=n("1iq3"),N=n("Xd8z"),T=(n("DvqP"),Object(p.createClassNameModifier)(Object(N.a)(),{theme:"bright"})),A=Object(v.g)({desktop:T}),E=Object(v.g)({desktop:function(e){return e}}),_=n("vwZL"),z=n("B1u8"),L=n("CfDi"),M=(n("/rgM"),Object(p.withBemMod)(Object(N.a)(),{tone:"blue"})),I=Object(v.g)({desktop:M}),B=n("gyk9"),V=n("Eju5"),W=(n("B0Hq"),Object(p.withBemMod)(Object(N.a)(),{nonvisual:!0})),q=Object(v.g)({desktop:W}),U=n("yn3j"),J=Object(U.cn)("Dropdown"),G=(n("PH0m"),r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),H=function(){return H=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},H.apply(this,arguments)},F=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Q=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c},Y=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},X=Object(p.compose)(Object(p.composeU)(A,E,_.a),Object(p.composeU)(L.a,I,B.a),z.a,V.a,q)(P.a),K=function(){},Z=(a=X,o=function(e){function t(){var t=e.apply(this,Y([],Q(arguments),!1))||this;return t.state={visible:t.props.visible,prevVisible:t.props.visible},t.defaultDelays={mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15},t.innerRef=Object(f.createRef)(),t.delayTimer=null,t.onClick=function(){t.setPopupVisible(!t.state.visible)},t.onMouseEnter=function(){var e=t.props.mouseEnterDelay;t.delaySetPopupVisible(!0,e||t.defaultDelays.mouseEnterDelay)},t.onMouseLeave=function(){var e=t.props.mouseLeaveDelay;t.delaySetPopupVisible(!1,e||t.defaultDelays.mouseLeaveDelay)},t.onFocus=function(){var e=t.props.focusDelay;t.delaySetPopupVisible(!0,e||t.defaultDelays.focusDelay)},t.onBlur=function(){var e=t.props.blurDelay;t.delaySetPopupVisible(!1,e||t.defaultDelays.blurDelay)},t.onPopupMouseEnter=function(){t.clearDelayTimer()},t.onPopupMouseLeave=function(){var e=t.props.mouseLeaveDelay;t.delaySetPopupVisible(!1,e||t.defaultDelays.mouseLeaveDelay)},t}return G(t,e),t.prototype.componentWillUnmount=function(){this.clearDelayTimer()},t.prototype.delaySetPopupVisible=function(e,t){var n=this;this.clearDelayTimer();var r=1e3*t;this.delayTimer=setTimeout((function(){n.setPopupVisible(e),n.clearDelayTimer()}),r)},t.prototype.setPopupVisible=function(e){var t=this.state.visible,n=this.props.onVisibleChange;this.clearDelayTimer(),t!==e&&(this.setState({visible:e,prevVisible:t}),n(e))},t.prototype.clearDelayTimer=function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)},t.prototype.render=function(){var e=this,t=this.props,n=t.children,r=t.innerContent,o=t.style,c=t.scope,i=(t.onVisibleChange,t.mouseLeaveDelay,t.mouseEnterDelay,t.focusDelay,t.blurDelay,t.trigger),s=F(t,["children","innerContent","style","scope","onVisibleChange","mouseLeaveDelay","mouseEnterDelay","focusDelay","blurDelay","trigger"]),u=f.Children.only(n),b=H(H({},s),{children:r,target:"anchor",anchor:this.innerRef,scope:c||this.innerRef,visible:this.state.visible,onClose:function(){return e.setPopupVisible(!1)}}),d={};-1!==i.indexOf("hover")&&(d.onMouseEnter=R(u.props.onMouseEnter,this.onMouseEnter),d.onMouseLeave=R(u.props.onMouseLeave,this.onMouseLeave),b.onMouseEnter=this.onPopupMouseEnter,b.onMouseLeave=this.onPopupMouseLeave),-1!==i.indexOf("focus")&&(d.onFocus=R(u.props.onFocus,this.onFocus),d.onBlur=R(u.props.onBlur,this.onBlur)),-1!==i.indexOf("click")&&(d.onClick=R(u.props.onClick,this.onClick));var p=Object(f.cloneElement)(u,d);return Object(l.jsxs)("span",{style:o,className:J(),ref:this.innerRef,children:[p,Object(l.jsx)(a,H({},b))]})},t}(f.PureComponent),o.displayName="withDropdown(".concat(Object(k.a)(a),")"),o.defaultProps={onVisibleChange:K,mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,visible:!1,trigger:["hover"],direction:"bottom-start"},o),$=Object(v.c)({desktop:Z},{file:"depot/components/Dropdown/index.ts"}),ee=n("wkgX"),te=n("18eQ"),ne=Object(U.cn)("TumblerAndData"),re=ne(),ae=(n("lJQW"),function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c}),oe=Object(p.compose)(x.a,ee.a)(j.a),ce=Object(f.memo)((function(e){var t=e.data,n=e.label,r=ae(Object(f.useState)(!1),2),a=r[0],o=r[1],c=Object(f.useCallback)((function(){return o((function(e){return!e}))}),[]);if(!t)return null;var i=ne("Content",{visible:a});return Object(l.jsxs)("div",{className:re,children:[Object(l.jsx)(oe,{view:"default",size:"m",checked:a,onChange:c,labelAfter:n}),Object(l.jsx)("div",{className:i,"data-relev-parser":n,dangerouslySetInnerHTML:{__html:t}})]})})),ie=n("AcvJ"),le=n("amzm"),se=n("/685"),ue=Object(v.g)({desktop:se.a}),fe=n("0hXw"),be=n("8RJh"),de=n("1F+w"),pe=n("XN7w"),je=n("vkax"),he=n("y+U/"),ve=n("JJbA"),ye=Object(U.cn)("TextWithTooltip")(),Oe=Object(U.cn)("TooltipTable")(),me=(n("D1t3"),function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c}),xe=Object(p.compose)(ve.a,he.a)(je.a),ge=Object(p.compose)(w.a,pe.a)(h.a),we=Object(f.memo)((function(e){var t=e.text,n=e.children,r=me(Object(f.useState)(!1),2),a=r[0],o=r[1],c=Object(f.useRef)(null),i=Object(f.useCallback)((function(){return o((function(e){return!e}))}),[]),s=Object(f.useCallback)((function(e,t){"click"===t&&e.target===document.documentElement||o(!1)}),[]);return Object(l.jsxs)("div",{className:ye,children:[Object(l.jsx)(ge,{controlRef:c,view:"clear",size:"s",onClick:i,children:t}),Object(l.jsx)(xe,{className:Oe,onClose:s,view:"default",size:"s",keepMounted:!0,direction:"bottom",anchor:c,visible:a,children:n})]})})),Ce=n("9lnC"),ke=n("PNGk"),De=n("J8QT"),Se=n("PYvS"),Re=Object(p.compose)(de.a,Ce.a)(fe.a),Pe=Object(p.compose)(De.a,Se.a)(ke.a),Ne=Object(f.memo)((function(e){var t=e.type,n=e.value,r=e.changeValue,a=e.idx,o=Object(f.useCallback)((function(e){r(a,"bool"===t?!n:e.target.value)}),[a,r,n,t]);switch(t){case"string":return Object(l.jsx)(Pe,{size:"m",view:"default",value:n||"",inputMode:"text",onChange:o});case"number":return Object(l.jsx)(Pe,{size:"m",view:"default",value:Number(n)||"",inputMode:"numeric",onChange:o});default:return Object(l.jsx)(Re,{size:"m",view:"default",checked:Boolean(n),onChange:o})}})),Te=(n("EVYq"),function(){return Te=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Te.apply(this,arguments)}),Ae=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c},Ee=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},_e=Object(p.compose)(be.a,de.a)(fe.a),ze=Object(U.cn)("CheckboxRow"),Le=ze(),Me=ze("Table"),Ie=ze("TableData"),Be=function(e){var t=e.children;return Object(l.jsx)("table",{className:Me,children:Object(l.jsx)("tbody",{children:t})})},Ve=function(e){var t=e.rules,n=e.updateData;return Object(l.jsxs)("table",{className:Me,children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"cgi-parametr"}),Object(l.jsx)("th",{children:"value"}),Object(l.jsx)("th",{children:"description"})]})}),Object(l.jsx)("tbody",{children:t.map((function(e){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{className:Ie,children:e.cgiParametr}),Object(l.jsx)("td",{className:Ie,children:Object(l.jsx)(Ne,{idx:e.idx,value:e.value,type:e.type,changeValue:n})}),Object(l.jsx)("td",{className:Ie,children:e.description})]},e.idx)}))})]})},We=Object(f.memo)((function(e){var t=e.label,n=e.enabled,r=e.updateData,a=e.idx,o=e.content,c=e.colIdx,i=e.rules,s=Object(f.useCallback)((function(e){r(c,a,e)}),[c,a,r]),u=Object(f.useCallback)((function(){return s((function(e,t){var n=t.findIndex((function(t){return t.idx===e})),r=t[n];return r.enabled=!r.enabled,t[n]=Te({},r),Ee([],Ae(t),!1)}))}),[s]),b=Object(f.useCallback)((function(e,t){return s((function(n,r){var a=r.findIndex((function(e){return e.idx===n})),o=r[a];if(!o.rules)return r;var c=o.rules.findIndex((function(t){return t.idx===e})),i=o.rules[c];return i.value=t,i.changed=i.initValue!==t,o.rules=Ee([],Ae(o.rules),!1),r[a]=Te({},o),Ee([],Ae(r),!1)}))}),[s]);return Object(l.jsxs)("div",{className:Le,children:[Object(l.jsx)(_e,{size:"s",view:"default",onChange:u,checked:n}),Object(l.jsx)(we,{text:t,children:Object(l.jsxs)("div",{children:[Object(l.jsx)(Be,{children:o.map((function(e,t){return Object(l.jsx)("tr",{children:e.map((function(e,t){return Object(l.jsx)("td",{className:Ie,dangerouslySetInnerHTML:{__html:e}},t)}))},t)}))}),i&&0!==i.length&&Object(l.jsx)(Ve,{rules:i,updateData:b})]})})]})})),qe=Object(U.cn)("RulesHeader")(),Ue=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c},Je=Object(p.compose)(be.a,de.a)(fe.a),Ge=Object(f.memo)((function(e){var t=e.colIdx,n=e.title,r=e.updateData,a=Ue(Object(f.useState)(!0),2),o=a[0],c=a[1],i=Object(f.useCallback)((function(){r(t,-1,(function(e,t){return t.map((function(e){return e.enabled=!e.enabled,e}))})),c((function(e){return!e}))}),[r,t]);return Object(l.jsx)(Je,{label:n,className:qe,size:"s",view:"default",onChange:i,checked:o})})),He=Object(U.cn)("RulesTable"),Fe=He("Column"),Qe=He("Content"),Ye=(n("Rk95"),function(e){var t=e.updateData,n=e.rulesDataArr,r=e.show,a=He({show:r});return Object(l.jsx)("div",{className:a,children:n.map((function(e){return Object(l.jsxs)("div",{className:Fe,children:[Object(l.jsx)(Ge,{colIdx:e.idx,title:e.title,updateData:t}),Object(l.jsx)("div",{className:Qe,children:e.data.map((function(n){return Object(l.jsx)(We,{rules:n.rules,idx:n.idx,colIdx:e.idx,label:n.title+" "+n.content.length,enabled:n.enabled,updateData:t,content:n.content},n.idx)}))})]},e.idx)}))})}),Xe=(n("bJMi"),function(){return Xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Xe.apply(this,arguments)}),Ke=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c},Ze=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},$e=Object(p.compose)(x.a,ee.a)(j.a),et=Object(p.compose)(ue)(le.a),tt=Object(p.compose)(g.a,ie.a)(h.a),nt=function(e,t,n,r){var a=e.findIndex((function(e){return e.idx===t})),o=e[a],c=Xe(Xe({},o),{data:r(n,e[a].data)});return e.splice(a,1,c),Ze([],Ke(e),!1)},rt=function(e){var t=e.wizardDataWithoutSrcSetup,n=e.wizardDataWithSrcSetup,r=e.rearrangeData,a=e.begemotRulesShown,o=e.rearrangeShown,c=Object(U.cn)("RulesContent")({show:a||o}),i=Object(f.useCallback)((function(){window.location.assign(window.location+"&json_dump_responses=WIZARDRY")}),[]),s=Ke(Object(f.useState)(!1),2),u=s[0],b=s[1],d=Ke(Object(f.useState)([{idx:0,title:"Переранжирования",data:r.map((function(e){return Xe(Xe({},e),{enabled:!0})}))},{idx:1,title:"Данные источников",data:[]}]),2),p=d[0],j=d[1],h=Ke(Object(f.useState)([{idx:0,title:"Правила",data:t.map((function(e){return Xe(Xe({},e),{enabled:!0})}))},{idx:1,title:"Правила SrcSetup*",data:n.map((function(e){return Xe(Xe({},e),{enabled:!0})}))}]),2),v=h[0],y=h[1],O=Object(f.useCallback)((function(){b((function(e){return!e}))}),[]),m=v.map((function(e){return Xe(Xe({},e),{data:e.data.filter((function(e){return u||e.working}))})})),x=Object(f.useCallback)((function(e,t,n){y((function(r){return nt(r,e,t,n)}))}),[]),g=Object(f.useCallback)((function(e,t,n){j((function(r){return nt(r,e,t,n)}))}),[]),w=Object(f.useCallback)((function(){confirm("Перезагрузить страницу?")&&function(e,t){var n=window.location.href,r=[],a=e.filter((function(e){return!e.enabled})).map((function(e){return"&rwr=-"+e.title}));t.forEach((function(e){var t;if(e.enabled){var a=null===(t=e.rules)||void 0===t?void 0:t.filter((function(e){return e.changed})).map((function(e){var t="bool"===e.type?Number(e.value):e.value;return n=n.replace(new RegExp("("+encodeURIComponent(e.cgiParametr+"=")+".*?)(&|$)","g"),"$2"),"&rearr=".concat(e.cgiParametr,"=").concat(t)}));r=r.concat(a||[])}else r.push("&rearr=".concat(e.title,"_off"))}));var o=t.filter((function(e){return!e.enabled})).map((function(e){return"&rearr="+e.title+"_off"}));r=Ze(Ze(Ze([],Ke(r),!1),Ke(a),!1),Ke(o),!1),window.location.replace(n+r.join(""))}(v.reduce((function(e,t){return e.push.apply(e,Ze([],Ke(t.data),!1)),e}),[]),p.reduce((function(e,t){return e.push.apply(e,Ze([],Ke(t.data),!1)),e}),[]))}),[p,v]);return Object(l.jsxs)("div",{className:c,children:[Object(l.jsxs)("div",{className:C.e,children:[Object(l.jsx)($e,{view:"default",size:"m",checked:u,onChange:O,labelAfter:"Несработавшие правила"}),Object(l.jsx)(tt,{view:"default",size:"m",onClick:w,children:"Перезадать запрос с изменениями"}),Object(l.jsx)(et,{view:"default",onClick:i,children:"Begemot"})]}),Object(l.jsx)(Ye,{show:a,updateData:x,rulesDataArr:m}),Object(l.jsx)(Ye,{show:o,updateData:g,rulesDataArr:p})]})},at=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c},ot=Object(p.compose)(g.a,w.a)(h.a),ct=Object(v.c)({desktop:function(e){var t=e.data,n=at(Object(f.useState)(!1),2),r=n[0],a=n[1],o=Object(f.useCallback)((function(){a(!0),fetch("https://blender.v.yandex-team.ru/request/save/",{method:"post",body:JSON.stringify(t)}).then((function(e){a(!1),e.redirected&&window.open(e.url,"_blank")})).catch((function(e){a(!1),alert(e.message)}))}),[t]);return Object(l.jsx)("div",{children:Object(l.jsx)(ot,{view:"default",size:"s",disabled:r,onClick:o,children:"Blender"})})}},{file:"depot/components/RelevanceCookie/RelevanceCookie.components/BlenderButton/index.ts"}),it=n("2GLw"),lt="relcgi";var st=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c},ut=Object(p.compose)(x.a,ee.a)(j.a),ft=Object(v.c)({desktop:function(e){var t=e.param,n=e.label,r=st(Object(f.useState)(function(e){var t=Object(it.a)();if(!t)return!1;var n=t.yp(lt);return!!n&&-1!==n.indexOf(e)}(t)),2),a=r[0],o=r[1],c=Object(f.useCallback)((function(){var e=function(e){var t,n=Object(it.a)();if(!n)return!1;var r=(null!==(t=n.yp(lt))&&void 0!==t?t:"").split(":"),a=r.includes(e),o=a?r.filter((function(t){return t!==e})):r.concat(e);return n.yp(lt,o.join(":"),n.getExpirationDate(365)),!a}(t);o(e)}),[t]);return Object(l.jsx)(ut,{view:"default",size:"m",checked:a,onChange:c,labelAfter:n})}},{file:"depot/components/RelevanceCookie/RelevanceCookie.components/CookieTumbler/index.ts"});var bt=Object(U.cn)("HeaderContent"),dt=bt("Popup"),pt=bt("PopupArrow"),jt=(n("qJD2"),Object(p.compose)(x.a,ee.a)(j.a)),ht=function(){},vt=Object(f.memo)((function(e){var t=e.relevData,n=e.onTabToggle,r=e.tabsOpened,a=e.isVisible,o=t.qtreeData,c=t.reqId,i=t.baseSearchCount,s=t.unanswers,u=t.unanswerSourcesCount,b=t.wizardDataWithSrcSetup,d=t.wizardDataWithoutSrcSetup,p=t.rearrangeData,j=t.sbh,h=t.pruning,v=t.blenderButton,y=t.unanswerPopupData,O=t.backendsPropertiesData,m=Object(f.useCallback)((function(){return n("begemotRules")}),[n]),x=Object(f.useCallback)((function(){return n("rearrangeRules")}),[n]),g=Object(f.useCallback)((function(){return n("requestCGI")}),[n]),w=bt({visible:a}),k=(null==b?void 0:b.length)||(null==d?void 0:d.length);return Object(l.jsxs)("div",{className:w,children:[o?Object(l.jsx)(te.a,{name:"QTree",value:o}):null,Object.keys(O||{}).map((function(e){return e in O?Object(l.jsx)(ce,{data:O[e],label:e},e):null})),Object(l.jsx)(ct,{data:v}),Object(l.jsx)(te.a,{name:"Множитель прюнинга",value:h}),Object(l.jsx)(te.a,{name:"Идентификатор запроса",value:c}),Object(l.jsxs)("div",{className:C.e,children:[Object(l.jsx)(te.a,{name:"Базовых поисков",value:i}),Object(l.jsx)(te.a,{name:"неответов",value:s}),Object(l.jsx)(te.a,{name:"неответов источников",value:u}),Object(l.jsx)($,{visible:!1,innerContent:Object(l.jsx)("div",{className:dt,children:y.map((function(e,t){return Object(l.jsx)("div",{children:e},t)}))}),onVisibleChange:ht,trigger:"click",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,view:"default",direction:"bottom-start",hasTail:!0,children:Object(l.jsx)("div",{className:pt,children:"▼"})})]}),a&&!j&&Object(l.jsxs)(l.Fragment,{children:[k?Object(l.jsx)(jt,{view:"default",size:"m",checked:r.begemotRules,onChange:m,labelAfter:"Правила бегемота"}):null,Object(l.jsx)(jt,{view:"default",size:"m",checked:r.rearrangeRules,onChange:x,labelAfter:"Правила переранжирования"}),Object(l.jsx)(jt,{view:"default",size:"m",checked:r.requestCGI,onChange:g,labelAfter:"Request CGIs"}),Object(l.jsx)(rt,{wizardDataWithoutSrcSetup:d,wizardDataWithSrcSetup:b,rearrangeData:p,begemotRulesShown:r.begemotRules,rearrangeShown:r.rearrangeRules}),r.requestCGI&&Object(l.jsxs)("div",{className:C.e,children:[Object(l.jsx)(ft,{param:"fba",label:"Включить динамические баны для запросов с ограничением видимости"}),Object(l.jsx)(ft,{param:"nc",label:"Отключить кэш (задавать все запросы с nocache=da)"})]})]})]})})),yt=n("n5oa"),Ot=(n("wwe9"),function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c}),mt={name:"relevance-cookie"},xt=Object(p.compose)(x.a,m)(j.a),gt=Object(p.compose)(g.a,w.a)(h.a),wt=function(e){var t=e.relevData,n=e.shouldShowFeedbackButton,r=t.reqId,a=Object(d.useBaobab)(mt,e.logNode,e),o=a.nextContext,c=a.BaobabProvider,i=Ot(Object(f.useState)(yt.a),2),s=i[0],u=i[1];Object(f.useEffect)((function(){u(Object(yt.b)())}),[]);var b=Object(f.useCallback)((function(e){Object(yt.c)(e),u(Object(yt.b)()),window.dispatchEvent(new Event(C.b))}),[]),p=Object(f.useCallback)((function(){return b("relevanceCookie")}),[b]),j=Object(f.useCallback)((function(){window.open("https://setrace.yandex-team.ru/web/trace/".concat(r),"_blank")}),[r]),h=Object(f.useCallback)((function(){b("noCache")}),[b]),v=Object(f.useCallback)((function(){b("eventLog")}),[b]),y=Object(f.useCallback)((function(){b("noTests")}),[b]),O=Object(f.useCallback)((function(){window.open(C.a,"_blank")}),[]);return Object(l.jsx)(c,{value:o,children:Object(l.jsxs)("div",{className:C.d,children:[Object(l.jsxs)("div",{className:C.f,children:[Object(l.jsx)(xt,{view:"default",size:"s",checked:s.relevanceCookie,onChange:p,labelAfter:"Отображение куки"}),Object(l.jsx)(gt,{view:"default",size:"s",onClick:j,children:"SETrace"}),Object(l.jsx)(gt,{view:"default",size:"s",checked:s.noCache,onClick:h,title:"Добавить в запрос параметр nocache=da",children:"NoCache"}),Object(l.jsx)(gt,{view:"default",size:"s",checked:s.eventLog,onClick:v,title:"Добавить в запрос параметр dump=eventlog",children:"Event Log"}),Object(l.jsx)(gt,{view:"default",size:"s",checked:s.noTests,onClick:y,title:"Добавить в запрос параметр no-tests=1",children:"No Tests"}),n?Object(l.jsx)(gt,{view:"default",size:"s",onClick:O,title:"Оставить фидбек/пожелания/замечания по новой куке релевантности",children:"Feedback"}):null]}),Object(l.jsx)(vt,{onTabToggle:b,tabsOpened:s,relevData:t,isVisible:s.relevanceCookie})]})})},Ct=n("Bhso"),kt=n("Kp5h"),Dt=n("/9jV"),St=function(){return St=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},St.apply(this,arguments)},Rt=Object(c.b)({desktop:function(e){var t=Object(kt.a)(),n=Object(f.useCallback)((function(){if(Ct.a){var e;try{e=JSON.parse(window.localStorage.getItem(C.c)||"{}")}catch(n){return}t(Dt.a.setInternalLayoutView(Boolean(null==e?void 0:e.relevanceCookie)))}}),[t]);return Object(b.a)(C.b,n),n(),Object(l.jsx)(wt,St({},e))}},{file:"fiji/images-app/src/features/RelevanceCookie/RelevanceCookie.components/Wizard/index.ts"}),Pt=function(){return Pt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Pt.apply(this,arguments)},Nt=Object(c.b)({desktop:function(){var e=u((function(e){return e}));return e?Object(l.jsx)(Rt,Pt({},e)):null}},{file:"fiji/images-app/src/features/RelevanceCookie/index.ts"}),Tt=Object(i.a)({featureName:"RelevanceCookie"})(Nt)},bJMi:function(e,t,n){},f3eo:function(e,t,n){var r=function(e,t,n){if(void 0===t){var a=r.get(e);return a?decodeURIComponent(a):null}r.set(e,encodeURIComponent(t),n)};function a(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))}function o(e){return decodeURIComponent(e)}r.get=function(e){return this.getAll()[e]},r.getAll=function(){for(var e=this._readCookie(),t=e?e.split("; "):[],n={},r=0;r<t.length;r++){var a=t[r].split("="),o=a[0],c=a.slice(1).join("=");'"'===c.charAt(0)&&(c=c.slice(1,-1)),n[o]=c}return n},r.set=function(e,t,n){var r,a;n||(n={}),"number"==typeof(r=n.expires)&&(r=new Date(Date.now()+24*r*60*60*1e3)),a=[e,"=",t,r&&"; expires="+r.toUTCString(),n.path&&"; path="+n.path,n.domain&&"; domain="+n.domain,n.samesite&&"; samesite="+n.samesite,n.secure?"; secure":""].join(""),this._writeCookie(a)},r.remove=function(e){this.set(e,"",{expires:-1})},r._readCookie=function(){try{return document.cookie}catch(e){return""}},r._writeCookie=function(e){try{document.cookie=e}catch(t){}};var c=function(e,t,n){this.domain=e,this.ypParams=t||{expires:new Date("Tue Jan 1 00:00:00 2038"),domain:this.domain,path:"/"},this.ysParams=n||{domain:this.domain,path:"/"}};c.prototype={getExpirationDate:function(e){return Math.round(Date.now()/1e3+24*e*60*60)},ypRead:function(){for(var e=r("yp"),t=e?e.split("#"):[],n=new Date/1e3,a={},c=0,i=t.length;c<i;c++){var l=t[c].split("."),s=l[0],u=l[1],f=l.slice(2).join(".");s>n&&(a[u]={value:o(f),expires:s})}return a},ypWrite:function(e){for(var t,n=[],o=0,c=Object.keys(e),i=c.length;o<i;o++)t=e[c[o]],n.push([t.expires,c[o],!1===t.encode?t.value:a(t.value)].join("."));r.set("yp",n.join("#"),this.ypParams)},ypRemove:function(e){var t=this.ypRead();e&&t[e]&&(delete t[e],this.ypWrite(t))},yp:function(e,t,n){var r={};"object"==typeof e&&(e=(r=e).name,t=r.value,n=r.expires);var a=this.ypRead(),o=a[e];return void 0===t?o&&o.value:(o||(o={}),o.value=t,o.expires=n||o.expires||this.getExpirationDate(7),o.encode=r.encode,a[e]=o,this.ypWrite(a))},ypBit:function(e,t,n,r){var a=this.yp(e),o=a?a.split(""):[];if(void 0===n)return"1"===o[t];for(o[t]=n?"1":"0";t--;)o[t]||(o[t]="0");this.yp(e,o.join(""),r)},ysRead:function(){var e=r("ys"),t=e?e.split("#"):[],n={};return t.forEach((function(e){var t=e.split("."),r=t[0],a=t.slice(1).join(".");n[r]=o(a)})),n},ysWrite:function(e){for(var t=[],n=0,o=Object.keys(e),c=o.length;n<c;n++)t.push([o[n],a(e[o[n]])].join("."));r.set("ys",t.join("#"),this.ysParams)},ys:function(e,t){var n=this.ysRead();return t?(n[e]=t,this.ysWrite(n)):n[e]}},e.exports={cookies:r,yCookies:c}},lJQW:function(e,t,n){},qJD2:function(e,t,n){},wwe9:function(e,t,n){}}]);